<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resguardos Jiw</title>
    <link rel="Stylesheet" href="leaflet.css">
    <link rel="Stylesheet" href="ejemplo.css">
    <link rel="Stylesheet" href="leaflet.leyend.css">
    <script src="leaflet.js"></script>
    <script src="provider.js"></script>
    <script src="leaflet.leyend.js"></script>
    <script src="data/dpto_guaviare.geojson"></script>      
    <script src="data/meta.geojson"></script>   
    <script src="data/resguardos_guaviare.geojson"></script>
    <script src="data/resguardos_jiw.geojson"></script>
    <script src="data/resguardos_jiw_1.geojson"></script>
    <script src="data/lindosa.geojson"></script>
    <script src="data/drenaje_sencillo.geojson"></script>
    <script src="data/rio_guaviare.geojson"></script>
</head>
<body>

<div id='mapa'></div>
<script>
   
   var mymap = L.map('mapa').setView([2.824112, -72.132499],10);
   


    var satelite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	    attribution: ''
    }).addTo(mymap);
    

    var OSM = L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
	maxZoom: 20,
	attribution: '&copy; Openstreetmap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(mymap);


    
    function guaviareStyle(feature) {
    return {
        fillColor: 'red',
        weight: 2,
        opacity: 1,
        color: 'black',
        dashArray: '1',
        fillOpacity: 0.1
    };
}
    var guaviare =L.geoJson(guaviare,{style: guaviareStyle}).addTo(mymap);   
    
    function metaStyle(feature) {
    return {
        fillColor: 'yellow',
        weight: 2,
        opacity: 1,
        color: 'black',
        dashArray: '1',
        fillOpacity: 0.1
    };
}
var meta =L.geoJson(meta,{style: metaStyle}).addTo(mymap);



function resguardos_guaviareStyle(feature){
            return {
                fillColor : 'green',
                weight : 2, 
                opacity : 1,
                color : 'black', 
                dashArray : 1, 
                fillOpacity : 0.7
            }
        }

    var resguardos_guaviare = L.geoJson(resguardos_guaviare,{style : resguardos_guaviareStyle, onEachFeature: function(feature, layer){
		layer.bindPopup(feature.properties["NOMBRE_RES"] + '<br>'+ '(' + feature.properties["PUEBLO"] +  ')')
	}}).addTo(mymap);

    var jiwLayer; 
    
    function jiwStyle(feature){
            return {
                fillColor : 'red',
                weight : 2, 
                opacity : 1,
                color : 'black', 
                dashArray : 1, 
                fillOpacity : 0.7
            }
        }

    var jiw = L.geoJson(jiw,{style : jiwStyle}).addTo(mymap);
    var jiw_1 = L.geoJson(jiw_1,{style : jiwStyle}).addTo(mymap);

       
            
    function lindosaStyle(feature) {
    return {
        fillColor: 'purple',
        weight: 2,
        opacity: 1,
        color: 'black',
        dashArray: '1',
        fillOpacity: 0.5
    };
}

    var lindosa =L.geoJson(lindosa,{style: lindosaStyle}).addTo(mymap); 
    
    


    var chivaIcon = L.icon({
    iconUrl: './images/chiva.png',
    shadowUrl: './images/chiva_sombra.png',

    iconSize:     [60, 61], // size of the icon
    shadowSize:   [70, 61], // size of the shadow
    iconAnchor:   [20, 58], // point of the icon which will correspond to marker's location
    shadowAnchor: [6, 70],  // the same for the shadow
    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
});

        var point = [2.568723, -72.642379];
        var marker =L.marker(point).addTo(mymap);
        var myMarker = L.marker(point);
        myMarker.addTo(mymap);
        myMarker.bindPopup(
            '<b>San José del Guaviare</b>',
            {minWidth:300}
        );
   
        var point2 = [2.546911, -72.682785];
        var marker2 =L.marker(point2).addTo(mymap);
        var myMarker2 = L.marker(point2);
        myMarker2.addTo(mymap);
        myMarker2.bindPopup(
            '<b>La María /Wuej Lajt/</b>',
            {minWidth:300}
        );
        var point3 = [2.593308, -72.569382];
        var marker3 =L.marker(point3).addTo(mymap);
        var myMarker3 = L.marker(point3);
        myMarker3.addTo(mymap);
        myMarker3.bindPopup(
            '<b>Barrancón /Bakam/</b> <p><a href="http://www.redcolombia.org/2012/11/28/jiw-la-agonia-de-un-pueblo/"</a> Artículo Redher </p></div>',
            {minWidth:300}
        );

        var point4 = [2.625139, -72.488952];
        var marker4 =L.marker(point4).addTo(mymap);
        var myMarker4 = L.marker(point4);
        myMarker4.addTo(mymap);
        myMarker4.bindPopup(
            '<b>La Fuga /Char-on laja char-on/</b>',
            {minWidth:300}
        );
        var point5 = [2.739350, -72.510978];
        var marker5 =L.marker(point5).addTo(mymap);
        var myMarker5 = L.marker(point5);
        myMarker5.addTo(mymap);
        myMarker5.bindPopup(
            '<b>Caño La Sal /Masal/</b><a href= "https://www.elespectador.com/noticias/medio-ambiente/jiw-un-pueblo-acorralado-en-su-territorio/"</a> Noticia Espectador</div>',
            {minWidth:300}
        );
        var point6 = [2.791188, -71.781079];
        var marker6 =L.marker(point6).addTo(mymap);
        var myMarker6 = L.marker(point6);
        myMarker6.addTo(mymap);
        myMarker6.bindPopup(
            '<b>Barranco Colorado /Karnüm/</b>',
            {minWidth:300}
        );
        var point7 = [2.792346, -71.624067];
        var marker7 =L.marker(point7).addTo(mymap);
        var myMarker7 = L.marker(point7);
        myMarker7.addTo(mymap);
        myMarker7.bindPopup(
            '<b>Barranco Ceiba /Nawel jalpa/</b>',
            {minWidth:300}
        );
        var point8 = [2.917086, -71.603338];
        var greenIcon =L.marker(point8).addTo(mymap);
        var myMarker8 = L.marker(point8);
        myMarker8.addTo(mymap);
        myMarker8.bindPopup(
            '<b>Mocuare /Makuer/</b>',
            {minWidth:300}
        );
        var point9 = [2.900489, -72.199459];
        var greenIcon =L.marker(point9).addTo(mymap);
        var myMarker9 = L.marker(point9);
        myMarker9.addTo(mymap);
        myMarker9.bindPopup(
            '<b>Zaragozas /Naexal Lajt/</b><div><p><a href="https://www.agenciadetierras.gov.co/wp-content/uploads/2019/08/ACUERDO-75.pdf"</a> Acuerdo No. 75 de 2018 </p></div>',
            {minWidth:300}
        );
        var point10 = [2.741731, -72.648567];
        var greenIcon =L.marker(point10).addTo(mymap);
        var myMarker10 = L.marker(point10);
        myMarker10.addTo(mymap);
        myMarker10.bindPopup(
            '<b>Luna Roja </b> <p><a href= "https://www.humanitarianresponse.info/sites/www.humanitarianresponse.info/files/assessments/260215%20Informe%20MIRA%20Luna%20Roja.pdf"</a>Documento</p><p><a href=https://www.wayuunaiki.com.ve/titulares/campesinos-vs-indigenas-la-pelea-por-las-tierras-en-meta-y-guaviare/"</a>noticia</p><p><a href=https://issuu.com/laavenida/docs/art2"</a>noticia</p></div>',
            {minWidth:300}
        );
        var point11 = [2.620061, -72.825854];
        var greenIcon =L.marker(point11).addTo(mymap);
        var myMarker11 = L.marker(point11);
        myMarker11.addTo(mymap);
        myMarker11.bindPopup(
            '<b>Ceiba territoiro ancestral </b> <p><a href= "https://www.eltiempo.com/archivo/documento/CMS-13674177"</a>Noticia El Tiempo</p><a href="https://infoamazonia.org/es/2019/08/espanol-la-tierra-de-los-jiw-en-guaviare-se-acaba-a-manos-de-colonos-militares-y-grupos-ilegales/#!/map=51549&story=post-20126"</a>Documento <p><a href=https://www.parquesnacionales.gov.co/portal/es/ecoturismo/region-amazonia-y-orinoquia/parque-nacional-natural-sierra-de-la-macarena/comunidades/"</a> PNN La Macarena </p></div>',
            {minWidth:300}
        );



    var baseMaps = {
    "Imagen satelital": satelite,
    "Open Street Maps": OSM

    };

    var overlayMaps = {

    
    };

    L.control.layers(baseMaps, overlayMaps).addTo(mymap);

    L.control.scale().addTo(mymap);

    L.control.Legend({
    position: "bottomright",
    title:"Convenciones",
    legends: [
        {
            label: "Guaviare",
                type: "rectangle",
                sides: 4,
                color: "#000000",
                fillColor: "#FE97A5",
                weight: 2,
                layers: [guaviare],
                inactive: false,
        
    },
    {
            label: "Municipios Meta",
                type: "rectangle",
                sides: 4,
                color: "#000000",
                fillColor: "#FEF597",
                weight: 2,
                layers: [meta],
                inactive: false,
        
    },{
                label: "Resguardos Jiw",
                type: "rectangle",
                sides: 4,
                color: "#000000",
                fillColor: "#FF0000",
                weight: 2,
                layers: [jiw, jiw_1],
                inactive: false,
    
            },{
                label: "Serranía La Lindosa",
                type: "rectangle",
                sides: 4,
                color: "#000000",
                fillColor: "#E371FE",
                weight: 2,
                layers: [lindosa],
                inactive: false,
            },{
                label: "Resguardos indígenas vecinos",
                type: "rectangle",
                sides: 4,
                color: "#000000",
                fillColor: "#1FB323",
                weight: 2,
                layers: [resguardos_guaviare],
                inactive: false,
            }, {
                label: "Ríos Principales",
                type: "polyline",
                sides: 4,
                color: "#0C25FF",
                fillColor: "#1FB323",
                weight: 4,
                layers: [rio],
                inactive: false,
            },{
                label: "Caños",
                type: "polyline",
                sides: 4,
                color: "#0C25FF",
                fillColor: "#1FB323",
                weight: 2,
                layers: [cañosLayer],
                inactive: false,
            }]
}).addTo(mymap);


var cañosLayer;


function highlightFeature(e){
    var layer = e.target; 
    layer.setStyle(
        { 
        weight : 5 ,
        color : '#8692FE',
        fillColor : 'white',
        fillOpacity : 0.1 
        }
    );
    if(!L.Browser.ie && !L.Browser.opera){
        layer.bringToFront();
    }
}

function resetHighlight(e){
    cañosLayer.resetStyle(e.target);
}

function zoomToFeature(e){
    mymap.fitBounds(e.target.getBounds());
}


function cañosOnEachFeature(feature, layer){layer.bindPopup(feature.properties["NOMBRE_GEO"]),


  
    layer.on(
        {
            mouseover : highlightFeature,
            mouseout : resetHighlight,
        }
    );
}



function cañosStyle(feature) {
    return {
        fillColor: 'blue',
        weight: 2,
        opacity: 1,
        color: 'blue',
        dashArray: '1',
        fillOpacity: 1
    };
}


var cañosLayer = L.geoJson(
            caños,
            {
                style : cañosStyle,
            onEachFeature : cañosOnEachFeature, 
            }
            ).addTo(mymap);


            var rio = L.geoJson(
            rio,
            {
                style : cañosStyle,
            onEachFeature : cañosOnEachFeature, 
            }
            ).addTo(mymap);


</script>

</body>
</html>
